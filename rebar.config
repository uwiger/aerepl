%% -*- mode: erlang; indent-tabs-mode: nil -*-

{erl_opts, [debug_info]}.
{minimum_otp_vsn, "21.0"}.

{deps, [ {aesophia, {git, "https://github.com/aeternity/aesophia.git",
                     {tag, "v6.1.0"}}}
       , lager
       , aebytecode
       , aeminer
       , aetx
       , aecontract
       , aecore
       ]}.

{escript_main_app, aerepl}.
{escript_incl_apps, [aerepl, aesophia, aebytecode, enacl, aefate, aetx, aecontract, aecore]}.
% {escript_incl_extra, [{"_build/default/lib/enacl/priv/"}]}.

{dialyzer, [ {warnings, [unknown]}
           , {plt_apps, all_deps}
           , {base_plt_apps, [erts, kernel, stdlib, crypto, mnesia]}
           ]}.

{shell, [ {apps, [aerepl, aesophia, aebytecode]}
        ]}.

{erl_opts, [debug_info, {parse_transform, lager_transform},
            {lager_extra_sinks, [epoch_mining,
                                 epoch_metrics,
                                 epoch_sync,
                                 estratum]}]}.

% To expose some internal functions
{overrides, [
  {override, aetx, [
    {erl_opts, [{d, 'TEST'},
                {parse_transform, lager_transform},
                debug_info
                ]
    }]}
  ]}.
